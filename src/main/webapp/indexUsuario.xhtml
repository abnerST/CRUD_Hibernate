<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
	<title>Cadastro de usuários</title>
</h:head>

<h:body>
	<center>
		<div>

			<h:form id="formularioCadastroUsuario">

				<p:messages id="messages" showDetail="true" closable="true">
					<p:autoUpdate />
				</p:messages>
				<table
					style="border: 1.5px solid #D3D3D3; border-radius: 10px; padding: 5px;">
					<caption style="font-size: 25px;">Cadastrar usuários</caption>
					<tr>
						<th><p:outputLabel value="Login suário " /></th>
						<th><p:inputText value="#{usuarioBean.usuario.usuario}" /></th>

					</tr>
					<tr>
						<th><p:outputLabel value="Nome " /></th>
						<th><p:inputText value="#{usuarioBean.usuario.nome}" /></th>

					</tr>
					<tr>
						<th><p:outputLabel value="Senha " /></th>
						<th><p:password value="#{usuarioBean.usuario.senha}" /></th>
					</tr>
					<tr>
						<th style="text-align: right;"><p:commandButton
								value="Salvar" action="#{usuarioBean.salvar}"
								update="formularioCadastroUsuario" /></th>
					</tr>
				</table>
			

            <p:dataTable value="#{usuarioBean.lista}" var="u">
               <f:facet name="header">Lista de Usuários</f:facet>
               <p:column headerText="Id" visible="F">
                  <p:outputLabel value="#{u.id}" />
               </p:column>
               <p:column headerText="Usuário">
                  <p:outputLabel value="#{u.usuario}" />
               </p:column>                
               <p:column headerText="Nome do usuário">
                  <p:outputLabel value="#{u.nome}" />
               </p:column>          
               <p:column headerText="Ações">
                <p:commandButton value="&#128078;" title="Excluir"
                     action="#{usuarioBean.excluir(u.id,u.nome)}" update="formularioCadastroUsuario" 
                     styleClass="ui-button-danger">
                </p:commandButton>
               <p:commandButton value="&#9997;" title="Editar" 
                     action="edicaoUsuario"	update="formularioCadastroUsuario" 
                     styleClass="ui-button-info">
                     <f:setPropertyActionListener value="#{u}" target="#{usuarioBean.usuario}" />
               </p:commandButton>

               </p:column>
            </p:dataTable>
            <p:commandButton value="Voltar para o menu de opções" action="opcoes" />
         </h:form>
		</div>
	</center>
</h:body>

</html>
